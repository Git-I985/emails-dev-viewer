<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
        />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title></title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
            crossorigin="anonymous"
        />
        <link
            rel="stylesheet"
            href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
            integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="css/main.css" />
        <link rel="stylesheet" href="css/tooltip.css" />
        <!--  Favicon  -->
        <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png" />
        <link rel="manifest" href="favicon/site.webmanifest" />
    </head>
    <body class="bg-light">
        <div id="app">
            <div class="mb-5 mx-3 controls-panel" :class="{'sticky-top': stickyControlPanel}">
                <div class="px-5 py-4 mt-5 shadow rounded-3 bg-white">
                    <div class="d-flex flex-wrap justify-content-between mb-3 border p-3 rounded-3 bg-light">
                        <div class="d-flex flex-wrap">
                            <div class="form-check form-switch form-check-inline form-control-lg">
                                <input
                                    class="form-check-input"
                                    type="checkbox"
                                    id="flexCheckChecked"
                                    v-model="stickyControlPanel"
                                    tabindex="-1"
                                />
                                <label class="form-check-label" for="flexCheckChecked" style="cursor: pointer"
                                    >Pin on top</label
                                >
                            </div>
                            <div class="form-check form-switch form-check-inline form-control-lg">
                                <input
                                    class="form-check-input"
                                    type="checkbox"
                                    id="oneResolutionCheckbox"
                                    v-model="oneResolution"
                                    tabindex="-1"
                                />
                                <label class="form-check-label" for="oneResolutionCheckbox" style="cursor: pointer"
                                    >One resolution</label
                                >
                            </div>
                            <div class="form-check form-switch form-check-inline form-control-lg">
                                <input
                                    class="form-check-input"
                                    type="checkbox"
                                    id="darkTheme"
                                    tabindex="-1"
                                    v-model="darkTheme"
                                />
                                <label class="form-check-label" for="darkTheme" style="cursor: pointer"
                                    >Dark theme</label
                                >
                            </div>
                        </div>
                        <i
                            class="fas fa-sync-alt mx-2 link-icon icon-tooltip p-1"
                            :class="{'spin': fetchingEmails}"
                            @click="fetchEmails"
                        >
                            <span class="icon-tooltiptext">Sync emails</span>
                        </i>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-3 col-sm-12">
                            <label class="form-label text-muted"
                                >Language ({{ Object.keys(langs).length }} langs)</label
                            >
                            <select
                                v-model="lang"
                                class="form-select form-select-lg bg-light text-capitalize"
                                tabindex="1"
                            >
                                <option
                                    v-for="(lang, name) in langs"
                                    :value="name"
                                    class="d-flex justify-content-between"
                                >
                                    {{ lang }}
                                </option>
                            </select>
                        </div>
                        <div class="col-md-12 col-lg-3 col-sm-12">
                            <label class="form-label text-muted">Category</label>
                            <select
                                v-model="selectedFilter"
                                class="form-select form-select-lg bg-light text-capitalize"
                                tabindex="-1"
                            >
                                <option v-for="(filter, index) in Object.keys(filters)" :value="filter" :key="index">
                                    {{ filter }}
                                </option>
                            </select>
                        </div>
                        <div class="col-md-12 col-lg-6 col-sm-12">
                            <label class="form-label text-muted"
                                >Page {{ filteredPages.indexOf(page) + 1}}/{{ filteredPages.length }}</label
                            >
                            <select v-model="page" class="form-select form-select-lg bg-light" tabindex="2" autofocus>
                                <option v-for="page in filteredPages" :value="page">{{ page }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col fs-5 text-center">{{ subject }}</div>
                    </div>
                </div>
            </div>

            <!-- Emails -->
            <div
                class="d-flex flex-column flex-xl-row"
                :class="[oneResolution ? 'justify-content-center' : 'justify-content-between']"
            >
                <div v-for="resolution in resolutions" class="mx-3 mb-5">
                    <div class="d-flex justify-content-between mb-3 align-items-center bg-light p-3 rounded border">
                        <div class="icon-tooltip">
                            <span class="fs-4 text-secondary resolution">{{ resolution }}px</span>
                            <span class="icon-tooltiptext">Email resolution</span>
                        </div>
                        <div class="actions d-flex">
                            <!-- Opens email in new tab -->
                            <i
                                class="fas fa-external-link-alt mx-2 link-icon icon-tooltip p-1"
                                :data-href="getUrl('template')"
                                @click="openEmailInNewTab"
                                ><span class="icon-tooltiptext">Open email in new tab</span></i
                            >
                            <!-- Copy to clipboard -->
                            <i
                                class="far fa-clone mx-2 link-icon icon-tooltip p-1"
                                :class="copied ? 'muted' : 'link-icon'"
                                @click="copyEmailHtmlToClipboard"
                                ><span class="icon-tooltiptext">Copy email <b>HTML</b> code</span></i
                            >
                            <!-- Opens postdrop -->
                            <i
                                class="fab fa-product-hunt mx-2 link-icon icon-tooltip p-1"
                                data-href="https://app.postdrop.io/"
                                @click="goToPostdrop"
                                ><span class="icon-tooltiptext"
                                    >Open <span class="text-decoration-underline text-warning">Postdrop.io</span> with
                                    email <b>HTML</b> code</span
                                ></i
                            >
                        </div>
                    </div>
                    <div class="text-center rounded border d-flex justify-content-start iframe-wrapper">
                        <iframe
                            :src="getUrl('template')"
                            style="height: 2500px"
                            :style="{'width': resolution + 'px'}"
                            class="shadow-lg preview-iframe rounded loading"
                            tabindex="-1"
                        ></iframe>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://unpkg.com/vue@next"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
            crossorigin="anonymous"
        ></script>
        <script src="js/app.js"></script>
    </body>
</html>
